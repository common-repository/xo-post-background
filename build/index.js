(()=>{"use strict";const e=window.wp.plugins,o=window.wp.element,a=window.wp.i18n,n=window.wp.data,t=window.wp.coreData,r=window.wp.editPost,l=window.wp.components,c=window.wp.blockEditor;(0,e.registerPlugin)("xo-post-background",{render:()=>{var e,_,d;const u=(0,n.useSelect)((e=>e("core/editor").getCurrentPostType()),[]);if(!u)return null;const[i,g]=(0,t.useEntityProp)("postType",u,"meta");null==i._xo_background.id&&0!=i._background_id&&(i._xo_background.id=i._background_id),null!=i._xo_background.id&&(i._background_id=null),i._xo_background.repeat=null===(e=i._xo_background.repeat)||void 0===e||e,i._xo_background.attachment=null===(_=i._xo_background.attachment)||void 0===_||_,i._xo_background.enable_color=null!==(d=i._xo_background.enable_color)&&void 0!==d&&d;const b=(0,n.useSelect)((e=>e("core").getMedia(i._xo_background.id))),k=e=>{g({_xo_background:{...i._xo_background,color:e}})};return(0,o.createElement)(r.PluginDocumentSettingPanel,{title:(0,a.__)("Background","xo-post-background")},(0,o.createElement)("div",{className:"editor-post-featured-image"},(0,o.createElement)(c.MediaUploadCheck,null,(0,o.createElement)(c.MediaUpload,{onSelect:e=>{g({_xo_background:{...i._xo_background,id:e.id}})},value:i._xo_background.id,allowedTypes:["image"],render:({open:e})=>(0,o.createElement)("div",{className:"editor-post-featured-image__container"},(0,o.createElement)(l.Button,{className:i._xo_background.id?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:e},!i._xo_background.id&&(0,a.__)("Set background image","xo-post-background"),null!=b&&(0,o.createElement)(l.ResponsiveWrapper,{naturalWidth:b.media_details.width,naturalHeight:b.media_details.height},(0,o.createElement)("img",{src:b.source_url}))),i._xo_background.id>0&&(0,o.createElement)(l.__experimentalHStack,{className:"editor-post-featured-image__actions"},(0,o.createElement)(l.Button,{className:"editor-post-featured-image__action",onClick:e,"aria-hidden":"true"},(0,a.__)("Replace","xo-post-background")),(0,o.createElement)(l.Button,{className:"editor-post-featured-image__action",onClick:()=>{g({_background_id:null}),g({_xo_background:{...i._xo_background,id:0}}),toggleRef.current.focus()},style:{marginTop:0}},(0,a.__)("Remove","xo-post-background"))))}))),i._xo_background.id>0&&(0,o.createElement)("div",{className:"editor-post-background-options",style:{marginTop:20}},(0,o.createElement)(l.ToggleControl,{label:(0,a.__)("Repeat Background Image","xo-post-background"),checked:i._xo_background.repeat,onChange:e=>{g({_xo_background:{...i._xo_background,repeat:e}})}}),(0,o.createElement)(l.ToggleControl,{label:(0,a.__)("Scroll with Page","xo-post-background"),checked:i._xo_background.attachment,onChange:e=>{g({_xo_background:{...i._xo_background,attachment:e}})}}),(0,o.createElement)(l.Flex,{direction:"row",align:"baseline"},(0,o.createElement)(l.FlexBlock,null,(0,o.createElement)(l.SelectControl,{label:(0,a.__)("Horizontal position","xo-post-background"),value:i._xo_background.position_x,options:[{label:(0,a.__)("Left edge","xo-post-background"),value:"left"},{label:(0,a.__)("Center","xo-post-background"),value:"center"},{label:(0,a.__)("Right edge","xo-post-background"),value:"right"}],onChange:e=>{g({_xo_background:{...i._xo_background,position_x:e}})}})),(0,o.createElement)(l.FlexBlock,null,(0,o.createElement)(l.SelectControl,{label:(0,a.__)("Vertical position","xo-post-background"),value:i._xo_background.position_y,options:[{label:(0,a.__)("Top edge","xo-post-background"),value:"top"},{label:(0,a.__)("Center","xo-post-background"),value:"center"},{label:(0,a.__)("Bottom edge","xo-post-background"),value:"bottom"}],onChange:e=>{g({_xo_background:{...i._xo_background,position_y:e}})}}))),(0,o.createElement)(l.SelectControl,{label:(0,a.__)("Image Size","xo-post-background"),value:i._xo_background.size,options:[{label:(0,a.__)("Original Size","xo-post-background"),value:"auto"},{label:(0,a.__)("Fit to Screen","xo-post-background"),value:"contain"},{label:(0,a.__)("Fill Screen","xo-post-background"),value:"cover"}],onChange:e=>{g({_xo_background:{...i._xo_background,size:e}})}})),(0,o.createElement)("div",{className:"editor-post-background-color",style:{marginTop:20}},(0,o.createElement)(l.ToggleControl,{label:(0,a.__)("Background Color","xo-post-background"),checked:i._xo_background.enable_color,onChange:e=>{g({_xo_background:{...i._xo_background,enable_color:e}})}}),i._xo_background.enable_color&&(0,o.createElement)(o.Fragment,null,void 0===l.GradientPicker?(0,o.createElement)(l.ColorPalette,{value:i._xo_background.color,onChange:k}):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(l.ButtonGroup,{style:{marginBottom:12}},(0,o.createElement)(l.Button,{isSmall:!0,variant:i._xo_background.gradient?void 0:"primary",onClick:()=>{g({_xo_background:{...i._xo_background,gradient:""}})}},(0,a.__)("Solid","xo-post-background")),(0,o.createElement)(l.Button,{isSmall:!0,variant:i._xo_background.gradient?"primary":void 0,onClick:()=>{g({_xo_background:{...i._xo_background,gradient:"custom"}})}},(0,a.__)("Gradient","xo-post-background"))),i._xo_background.gradient?(0,o.createElement)(l.GradientPicker,{gradients:[],value:""===i._xo_background.custom_gradient?null:i._xo_background.custom_gradient,onChange:e=>{g({_xo_background:{...i._xo_background,custom_gradient:e}})}}):(0,o.createElement)(l.ColorPalette,{enableAlpha:!0,value:i._xo_background.color,onChange:k})))))}})})();